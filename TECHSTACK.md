# 🛠️ 技術堆棧分析與決策記錄 (Tech Stack Analysis)

本文件詳述 Viewpoints 專案的技術選型邏輯、架構優缺點分析，以及針對未來擴充性的決策建議。

---

## 🏛️ 現有架構：原生 Python `http.server` + `socketserver`

目前專案使用的伺服器端技術是 Python 內建的底層工具箱。

### ✅ 優點
1. **零相依性 (Zero Dependencies)**：只要環境中有 Python 3 即可執行，無需執行 `pip install`。
2. **極度輕量**：記憶體佔用極低，適合當作背景小工具執行。
3. **零組態 (Zero-Config)**：下載即用，門檻最低，這對本專案的「即時工具」定位至關重要。
4. **架構透明**：代碼量少（約 60 行），開發者能完全掌控網路標頭（Headers）與安全性設定。

### ❌ 缺點
1. **開發效率較低**：需手動處理 MIME 類型與 URL 解析。
2. **併發性能有限**：預設為單執行緒，處理多個並行請求的速度較慢。
3. **功能擴充困難**：若要整合資料庫或複雜 API 邏輯，開發成本較高。

---

## 🏎️ 競爭方案：現代框架 (如 Flask / FastAPI)

### ✅ 優點
1. **強大的生態系**：整合資料庫（ORM）、身份驗證機制只需幾行程式碼。
2. **高效併發**：內建非同步處理或多執行緒支援，反應速度更快。
3. **路由管理優雅**：透過裝飾器（Decorators）輕鬆定義複雜的 URL 路徑。

### ❌ 缺點
1. **環境污染**：必須建立虛擬環境（venv）並安裝第三方套件。
2. **啟動成本高**：對於只需「傳輸靜態檔案」的需求來說，Flask 的啟動與執行開銷過大。
3. **維護負擔**：需要管理依賴版本（requirements.txt / lock files）。

---

## 📊 深度對比表 (針對 Viewpoints 專案)

| 維度 | `http.server` (現狀) | `Flask` / `FastAPI` |
| :--- | :--- | :--- |
| **部署門檻** | ⭐⭐⭐⭐⭐ (最優) | ⭐⭐⭐ |
| **執行效能** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **擴充潛力** | ⭐ | ⭐⭐⭐⭐⭐ |
| **系統資源佔用** | 極低 | 中 |
| **開發體驗** | 傳統/手動 | 現代/自動 |

---

## 🎯 決策結論 (Conclusion)

針對 Viewpoints 專案目前**「數據驅動、輕量工具、前端邏輯為主」**的特性，我們決定：

### **維持現狀，不切換至現代框架。**

### **決策理由：**
1. **定位精準**：本伺服器的角色僅是為了解決瀏覽器 **CORS** 安全限制，而非執行複雜業務邏輯。
2. **使用者體驗**：為了讓使用者能感受到「解壓縮即用」的快感，我們不應強迫使用者處理 Python 套件依賴問題。
3. **維護簡便**：目前的程式碼易於審閱且安全性透明，完全符合開源工具小而美的特色。

---

## 🚀 未來變更指標 (Future Triggers)

若出現以下任一需求，專案應考慮遷移至 **FastAPI**：
- [ ] 需要整合真正的資料庫（如 SQLite/PostgreSQL）來儲存上千組自訂配置。
- [ ] 需要執行伺服器端影像處理（由伺服器抓取截圖並進行 AI 分析）。
- [ ] 需要建立使用者登入與權限管理系統。

---
**最後更新**: 2026-01-19  
**維護者**: Viewpoints 開發團隊
