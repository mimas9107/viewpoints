# 監視器選擇器使用說明

## 功能概述

監視器選擇器讓您可以從資料庫中輕鬆選擇監控點，並自動產生設定檔案。您可以選擇直接儲存到伺服器，或下載 JSON 檔案。

## 檔案說明

```
viewpoints/
├── index.html              # 主監控牆頁面
├── picker.html             # 監控點選擇器
├── upload.html             # 上傳組態介面
├── cameras_database.json   # 監控點資料庫
├── viewpoints.json         # 目前設定
├── start-server.py         # 基礎伺服器
├── start-server-fastapi.py # 統一伺服器（推薦）
└── README.md              # 使用說明
```

## 使用流程

### 步驟 1：啟動伺服器（推薦）

```bash
cd viewpoints
pip install -r requirements.txt
python3 start-server-fastapi.py
```

### 步驟 2：開啟選擇器

在瀏覽器開啟：

```
http://localhost:8844/picker.html
```

### 步驟 3：選擇監控點

1. **搜尋** - 在搜尋框輸入關鍵字（例如：「陽明山」、「國道一號」）
2. **篩選** - 點擊分類標籤篩選（國道、景點、市區等）
3. **選擇** - 點擊監控點項目即可加入選擇

### 步驟 4：儲存設定

**方式一：儲存到伺服器（推薦）**

1. 選擇完成後，點擊「儲存到伺服器」按鈕
2. 設定會直接寫入 `viewpoints.json`
3. 重新整理監控牆頁面即可看到更新

**方式二：匯出設定**

1. 點擊「匯出設定」按鈕
2. 下載 `viewpoints.json` 檔案
3. 將檔案覆蓋到專案根目錄

### 步驟 5：查看監控牆

重新整理 `http://localhost:8844`，您的自訂監控牆就會顯示！

## 介面功能

### 搜尋欄

- 即時搜尋監控點名稱或地點
- 支援模糊搜尋

### 分類標籤

- **全部** - 顯示所有監控點
- **國道** - 國道一號～十號
- **景點** - 國家公園、風景區
- **市區** - 六都市區道路
- **快速道路** - 台61線～台88線
- **省道** - 省道公路

### 已選擇面板

- 即時顯示已選擇的監控點
- 可單獨移除不要的項目
- 顯示選擇數量

### 操作按鈕

- **清空** - 清除所有已選擇的監控點
- **儲存到伺服器** - 將設定寫入 viewpoints.json
- **匯出設定** - 產生 viewpoints.json 檔案並下載
- **預覽監控牆** - 顯示設定資訊

## 資料庫擴充

### 新增監控點

編輯 `cameras_database.json`，加入新的監控點：

```json
{
  "id": "11",
  "name": "您的監控點名稱",
  "description": "詳細描述",
  "type": "image",
  "imageUrl": "https://...",
  "location": "地點",
  "category": "分類"
}
```

### 三種監控類型

**1. 靜態圖片**

```json
{
  "type": "image",
  "imageUrl": "https://cctv1.freeway.gov.tw/abs2jpg.php?sn=..."
}
```

**2. YouTube 直播**

```json
{
  "type": "youtube",
  "youtubeId": "RttyIGHbN_w"
}
```

**3. HLS 串流**

```json
{
  "type": "hls",
  "hlsUrl": "https://.../.../live.m3u8"
}
```

## 使用技巧

### 技巧 1：快速建立主題監控牆

**上班通勤：**
1. 搜尋「國道一號」
2. 選擇您經過的路段
3. 搜尋「市區」
4. 選擇公司附近路口

**假日出遊：**
1. 篩選「景點」
2. 選擇想去的國家公園
3. 篩選「國道」
4. 選擇往返路線

### 技巧 2：混合監控類型

建議搭配使用：
- 靜態圖片 - 路況監控（定時重新整理）
- YouTube - 景點直播（即時串流）
- HLS - 市區路口（高品質即時）

### 技巧 3：最佳監控數量

- **2x2 (4個)** - 適合單一主題
- **3x2 (6個)** - 適合上班通勤
- **3x3 (9個)** - 適合多地監控
- **4x3 (12個)** - 適合完整路網

## 故障排除

### 問題：選擇器打不開

**解決：**
確認伺服器是否啟動，並存取 `http://localhost:8844/picker.html`

### 問題：儲存到伺服器失敗

**解決：**
1. 確認 `start-server-fastapi.py` 正在執行
2. 檢查終端機是否有錯誤訊息
3. 確認 `.backups/` 目錄有寫入權限

### 問題：匯出的設定無法使用

**解決：**
1. 確認檔名為 `viewpoints.json`
2. 檔案放在專案根目錄
3. 重新整理瀏覽器（Ctrl+Shift+R）

### 問題：找不到想要的監控點

**解決：**
1. 查看 [tw.live](https://tw.live) 找到監控點資訊
2. 手動加入到 `cameras_database.json`
3. 重新整理選擇器

## 未來擴充

### 計畫功能

- 拖拉排序已選擇的監控點
- 自訂網格版面設定（手動設定欄列數）
- 預覽縮圖顯示
- 儲存/載入多組設定
- 自動爬蟲更新資料庫

### 資料庫擴充計畫

目前：10 個監控點
短期目標：50 個熱門監控點
長期目標：1000+ 個全台監控點

## 快速開始範例

1. 打開 `http://localhost:8844/picker.html`
2. 篩選「景點」
3. 選擇「陽明書屋」和「擎天崗」
4. 篩選「國道」
5. 選擇「國道一號林口」
6. 點擊「儲存到伺服器」
7. 回到主頁面查看！

---

**提示：** 您可以隨時編輯 `cameras_database.json` 加入更多監控點！
